import{S as _}from"./assets/vendor-CQMm3erF.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();(()=>{const r={openModalBtn:document.querySelector("[data-menu-open]"),closeModalBtn:document.querySelector("[data-menu-close]"),links:document.querySelectorAll(".mob-navig .mobile-menu-link"),modal:document.querySelector("[data-modal]")};console.log(r.closeModalBtn),r.openModalBtn.addEventListener("click",e),r.closeModalBtn.addEventListener("click",t),r.links.forEach(i=>{console.log(i),i.addEventListener("click",s)});function t(){r.modal.classList.add("is-hidden"),r.openModalBtn.classList.remove("is-hidden"),r.closeModalBtn.classList.add("is-hidden")}function e(){console.log(r.modal),r.modal.classList.remove("is-hidden"),r.openModalBtn.classList.add("is-hidden"),r.closeModalBtn.classList.remove("is-hidden")}function s(i){r.modal.classList.add("is-hidden"),r.openModalBtn.classList.remove("is-hidden"),r.closeModalBtn.classList.add("is-hidden")}})();async function k(r){try{const t=await fetch(`https://sound-wave.b.goit.study/api/artists?limit=8&page=${r}`);if(!t.ok){const e=await t.text();throw new Error(`HTTP ${t.status}: ${e}`)}return await t.json()}catch(t){throw console.error("Помилка при запиті:",t),t}}const h="/project-PushIt_Js/assets/icons-Cm1JtCZ-.svg",l={artistsList:document.querySelector(".artists-cards-list"),loadMoreBtn:document.querySelector(".load-more")};let u=1,p=0;T();l.loadMoreBtn.addEventListener("click",A);l.artistsList.addEventListener("click",$);function $(r){if(r.target.classList.contains("artist-learn-more-btn")){const e=r.target.closest(".artist-card").dataset.id;console.log("Clicked artist ID: ",e)}}async function M(r){const t=r.map(({genres:e,strArtist:s,strBiographyEN:i,strArtistThumb:o,_id:a})=>{const c=Array.isArray(e)?e.map(q=>`<li class="artist-genre-item">${q}</li>`).join(""):"",d=x(i);return`
        <li class="artist-card"  data-id="${a}">
          <div class="artist-thumb">
      <img src="${o}" alt="${s}" class="artist-img">
          </div>
          <ul class="aritist-genre-list">${c}</ul>
              <h3 class="artist-name">${s}</h3>
              <p class="artist-bio">${d}</p>
            <button type="button" class="artist-learn-more-btn">Learn More
              <svg class="artist-btn-icon" width="24" height="24" fill="#fff">
                  <use href="${h}#icon-learn-more"></use>
              </svg>
          </button>
         </li>     `}).join("");l.artistsList.insertAdjacentHTML("beforeend",t)}async function T(){try{const r=await k(u);if(r.artists.length===0){m(),console.log("Порожній список!");return}if(M(r.artists),p=Math.ceil(r.totalArtists/8),u>=p){m(),console.log("Сторінок більше, ніж контенту!");return}}catch(r){console.log("Помилка:",r.message),m();return}}async function A(){u+=1;try{const r=await k(u);if(r.artists.length===0){m(),console.log("Список артистів порожній!");return}if(M(r.artists),u>=p){m(),console.log("Сторінок більше, ніж контенту!");return}R()}catch(r){console.log("Помилка:",r.message);return}}function R(){if(!l.artistsList.firstElementChild)return;const{height:r}=l.artistsList.firstElementChild.getBoundingClientRect();window.scrollBy({top:r*2,behavior:"smooth"})}function x(r){return r.length<=140?r:r.slice(0,140)+"..."}function m(){l.loadMoreBtn.classList.add("is-hidden")}const C=document.querySelector(".swiper-wrapper");let f=1;const g=5;let b=0,y=!1,v;async function F(){try{const t=await(await fetch(`https://sound-wave.b.goit.study/api/feedbacks?limit=${g}&page=${f}`)).json();b=parseInt(t.total,10);const e=E(t.data);C.innerHTML=e,v=new _(".swiper",{loop:!1,centeredSlides:!1,spaceBetween:0,slidesPerView:1,pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},navigation:{nextEl:".right_btn",prevEl:".left_btn"},scrollbar:{el:".swiper-scrollbar"},on:{reachEnd:async()=>{if(!y&&!(f*g>=b)){y=!0,f++;try{const i=await(await fetch(`https://sound-wave.b.goit.study/api/feedbacks?limit=${g}&page=${f}`)).json(),o=E(i.data),a=document.createElement("div");a.innerHTML=o;const c=Array.from(a.children);v.appendSlide(c)}catch(s){console.error("Error fetching more feedbacks:",s)}y=!1}}}})}catch(r){console.error("Fetch error:",r)}}function N(r){return`
    <div class="fb_item swiper-slide">
      <div class="stars">${O(r.rating)}</div>
      <p class="fb_user_text">"${r.descr}"</p>
      <p class="fb_user_name">${r.name}</p>
    </div>
  `}function E(r){return r.map(t=>N(t)).join("")}function O(r){let t="";for(let s=1;s<=5;s++){const i=s<=r?"icon-purple-star":"icon-white-star";t+=`
      <svg width="20" height="20">
        <use href="${h}#${i}"></use>
      </svg>
    `}return t}document.addEventListener("DOMContentLoaded",()=>{F()});const w=document.querySelector(".left_btn"),S=document.querySelector(".right_btn");function B(){window.innerWidth>=768?(w.style.display="flex",S.style.display="flex"):(w.style.display="none",S.style.display="none")}B();window.addEventListener("resize",B);class j{constructor(){var t,e,s,i,o;this.modal=document.getElementById("feedbackModal"),this.form=document.getElementById("feedbackForm"),this.overlay=(t=this.modal)==null?void 0:t.querySelector(".feedback-modal__overlay"),this.closeBtn=(e=this.modal)==null?void 0:e.querySelector(".feedback-modal__close"),this.submitBtn=(s=this.modal)==null?void 0:s.querySelector(".feedback-modal__submit"),this.loader=(i=this.modal)==null?void 0:i.querySelector(".feedback-modal__loader"),this.submitText=(o=this.modal)==null?void 0:o.querySelector(".feedback-modal__submit-text"),this.currentRating=0,this.isSubmitting=!1,this.init()}init(){this.modal&&(this.updateIconUrls(),this.bindEvents())}updateIconUrls(){this.modal.querySelectorAll("svg use").forEach(e=>{const s=e.getAttribute("href");s&&s.startsWith("#")&&e.setAttribute("href",`${h}${s}`)})}bindEvents(){var t,e,s;(t=this.closeBtn)==null||t.addEventListener("click",()=>this.close()),(e=this.overlay)==null||e.addEventListener("click",()=>this.close()),document.addEventListener("keydown",i=>{i.key==="Escape"&&this.isOpen()&&this.close()}),this.bindRatingEvents(),this.bindValidationEvents(),(s=this.form)==null||s.addEventListener("submit",i=>this.handleSubmit(i)),this.bindOpenButtons()}bindOpenButtons(){document.querySelectorAll("[data-feedback-modal]").forEach(s=>{s.addEventListener("click",()=>this.open())}),document.querySelectorAll(".feedback-modal-trigger").forEach(s=>{s.addEventListener("click",()=>this.open())})}bindRatingEvents(){var s,i;const t=(s=this.modal)==null?void 0:s.querySelectorAll(".feedback-modal__star");if(!t)return;t.forEach((o,a)=>{o.addEventListener("mouseenter",()=>{this.highlightStars(a+1)}),o.addEventListener("click",()=>{this.setRating(a+1)})});const e=(i=this.modal)==null?void 0:i.querySelector(".feedback-modal__rating");e==null||e.addEventListener("mouseleave",()=>{this.highlightStars(this.currentRating)})}bindValidationEvents(){var s,i;const t=(s=this.modal)==null?void 0:s.querySelector("#feedbackName"),e=(i=this.modal)==null?void 0:i.querySelector("#feedbackMessage");t==null||t.addEventListener("input",()=>this.validateName()),t==null||t.addEventListener("blur",()=>this.validateName()),e==null||e.addEventListener("input",()=>this.validateMessage()),e==null||e.addEventListener("blur",()=>this.validateMessage())}highlightStars(t){var s;const e=(s=this.modal)==null?void 0:s.querySelectorAll(".feedback-modal__star");e&&e.forEach((i,o)=>{const a=i.querySelector("use");o<t?(a==null||a.setAttribute("href",`${h}#icon-purple-star`),i.classList.add("active")):(a==null||a.setAttribute("href",`${h}#icon-white-star`),i.classList.remove("active"))})}setRating(t){this.currentRating=t,this.highlightStars(t),this.clearError("ratingError")}validateName(){var s;const t=(s=this.modal)==null?void 0:s.querySelector("#feedbackName"),e=(t==null?void 0:t.value.trim())||"";return e.length<2?(this.showError("nameError","Ім'я повинно містити мінімум 2 символи"),!1):e.length>16?(this.showError("nameError","Ім'я не повинно перевищувати 16 символів"),!1):(this.clearError("nameError"),!0)}validateMessage(){var s;const t=(s=this.modal)==null?void 0:s.querySelector("#feedbackMessage"),e=(t==null?void 0:t.value.trim())||"";return e.length<10?(this.showError("messageError","Повідомлення повинно містити мінімум 10 символів"),!1):e.length>512?(this.showError("messageError","Повідомлення не повинно перевищувати 512 символів"),!1):(this.clearError("messageError"),!0)}validateRating(){return this.currentRating===0?(this.showError("ratingError","Будь ласка, оберіть рейтинг"),!1):(this.clearError("ratingError"),!0)}showError(t,e){var i;const s=(i=this.modal)==null?void 0:i.querySelector(`#${t}`);s&&(s.textContent=e,s.style.display="block")}clearError(t){var s;const e=(s=this.modal)==null?void 0:s.querySelector(`#${t}`);e&&(e.textContent="",e.style.display="none")}clearAllErrors(){var e;const t=(e=this.modal)==null?void 0:e.querySelectorAll(".feedback-modal__error");t==null||t.forEach(s=>{s.textContent="",s.style.display="none"})}async handleSubmit(t){if(t.preventDefault(),this.isSubmitting)return;const e=this.validateName(),s=this.validateMessage(),i=this.validateRating();if(!e||!s||!i)return;const o=this.getFormData();await this.submitFeedback(o)}getFormData(){var s,i;const t=(s=this.modal)==null?void 0:s.querySelector("#feedbackName"),e=(i=this.modal)==null?void 0:i.querySelector("#feedbackMessage");return{name:(t==null?void 0:t.value.trim())||"",descr:(e==null?void 0:e.value.trim())||"",rating:this.currentRating}}async submitFeedback(t){try{this.setSubmittingState(!0);const e=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json();console.log("Feedback submitted successfully:",s),this.showSuccessMessage(),setTimeout(()=>this.close(),2e3)}catch(e){console.error("Submit error:",e),this.showErrorMessage("Помилка при відправці. Спробуйте ще раз.")}finally{this.setSubmittingState(!1)}}setSubmittingState(t){this.isSubmitting=t,this.submitBtn&&(this.submitBtn.disabled=t),this.loader&&this.submitText&&(t?(this.loader.style.display="block",this.submitText.style.display="none"):(this.loader.style.display="none",this.submitText.style.display="block"))}showSuccessMessage(){this.submitText&&(this.submitText.textContent="Відправлено!")}showErrorMessage(t){this.showError("ratingError",t)}open(){if(!this.modal)return;this.modal.classList.add("is-open"),document.body.style.overflow="hidden";const t=this.modal.querySelector("#feedbackName");setTimeout(()=>t==null?void 0:t.focus(),100)}close(){this.modal&&(this.modal.classList.remove("is-open"),document.body.style.overflow="",this.resetForm())}resetForm(){var t;(t=this.form)==null||t.reset(),this.currentRating=0,this.highlightStars(0),this.clearAllErrors(),this.setSubmittingState(!1),this.submitText&&(this.submitText.textContent="Відправити")}isOpen(){var t;return((t=this.modal)==null?void 0:t.classList.contains("is-open"))||!1}}let n=null;document.addEventListener("DOMContentLoaded",()=>{n=new j});window.openFeedbackModal=()=>{n==null||n.open()};window.closeFeedbackModal=()=>{n==null||n.close()};async function P(){const r=document.querySelector(".images-1"),t=document.querySelector(".images-2");try{const s=await(await fetch("https://sound-wave.b.goit.study/api/artists?limit=20&page=1")).json(),o=await(await fetch("https://sound-wave.b.goit.study/api/artists?limit=20&page=3")).json(),a=s.artists.map(d=>d.strArtistThumb),c=o.artists.map(d=>d.strArtistThumb);r.innerHTML=L(a),t.innerHTML=L(c)}catch(e){console.error(e.message)}}function L(r){return r.map(t=>`<img src="${t}"/>`).join("")}P();
//# sourceMappingURL=index.js.map
