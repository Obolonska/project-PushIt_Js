import{C as _,S as O}from"./assets/vendor-DZ3qZG1b.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();(()=>{const s={openModalBtn:document.querySelector("[data-menu-open]"),closeModalBtn:document.querySelector("[data-menu-close]"),links:document.querySelectorAll(".mob-navig .mobile-menu-link"),modal:document.querySelector("[data-modal]")};console.log(s.closeModalBtn),s.openModalBtn.addEventListener("click",t),s.closeModalBtn.addEventListener("click",e),s.links.forEach(i=>{console.log(i),i.addEventListener("click",r)});function e(){s.modal.classList.add("is-hidden"),s.openModalBtn.classList.remove("is-hidden"),s.closeModalBtn.classList.add("is-hidden")}function t(){console.log(s.modal),s.modal.classList.remove("is-hidden"),s.openModalBtn.classList.add("is-hidden"),s.closeModalBtn.classList.remove("is-hidden")}function r(i){s.modal.classList.add("is-hidden"),s.openModalBtn.classList.remove("is-hidden"),s.closeModalBtn.classList.add("is-hidden")}})();const P=document.querySelector("[data-menu-open]"),V=document.querySelector("[data-menu-close]"),C=document.querySelector("[data-modal]");P.addEventListener("click",()=>{C.classList.remove("is-hidden"),document.body.classList.add("menu-open")});V.addEventListener("click",()=>{C.classList.add("is-hidden"),document.body.classList.remove("menu-open")});async function A(s,e,t,r=1,i=8){try{const o="https://sound-wave.b.goit.study/api/artists",a=new URLSearchParams;s&&a.append("name",s),e&&a.append("sortName",e),t&&a.append("genre",t),a.append("page",r),a.append("limit",i);const c=await fetch(`${o}?${a.toString()}`);if(!c.ok){const m=await c.text();throw new Error(`HTTP ${c.status}: ${m}`)}return await c.json()}catch(o){throw console.error("Помилка при запиті:",o),o}}const b="/project-PushIt_Js/assets/icons-mSHeLn5t.svg",n={artistsList:document.querySelector(".artists-cards-list"),loadMoreBtn:document.querySelector(".load-more"),form:document.querySelector(".artist-form"),input:document.querySelector(".form-input-filters"),resetBtn:document.querySelector("#resetButton"),resetBtnSearch:document.querySelector("#resetButtonSearch"),sorting:document.querySelector("#sorting"),genre:document.querySelector("#genre"),ul:document.querySelector("#artistsList"),toggleButton:document.querySelector(".search-and-filters"),artistForm:document.querySelector(".artist-form"),empty:document.querySelector(".empty-state"),loader:document.querySelector(".loader")};let l=1,E=0,d="",u="",h="",w;J();p(h,d,u,l);n.loadMoreBtn.addEventListener("click",Q);n.artistsList.addEventListener("click",K);n.sorting.addEventListener("change",U);n.genre.addEventListener("change",W);n.form.addEventListener("submit",D);n.resetBtn.addEventListener("click",()=>{F.setChoiceByValue(""),w.setChoiceByValue(""),n.input.value="",d="",u="",h="",l=1,n.artistsList.innerHTML="",p(h,d,u,l)});n.resetBtnSearch.addEventListener("click",()=>{F.setChoiceByValue(""),w.setChoiceByValue(""),n.input.value="",d="",u="",h="",l=1,n.artistsList.innerHTML="",p(h,d,u,l)});const F=new _(n.sorting,{searchEnabled:!1,shouldSort:!1,classNames:{itemSelectable:["select"],placeholder:"sort_placeholder"}});async function D(s){s.preventDefault(),h=n.input.value.trim(),l=1,n.artistsList.innerHTML="",p(h,d,u,l),n.input.value="",n.genre.value="",n.sorting.value=""}async function U(s){d=s.target.value.trim(),l=1,n.artistsList.innerHTML="",p(h,d,u,l)}async function W(s){u=s.target.value.trim(),l=1,n.artistsList.innerHTML="",p(h,d,u,l)}function G({genre:s}){return`<option value="${s}">${s}</option>`}function z(s){const e=s.map(G).join("");n.genre.innerHTML=n.genre.innerHTML+e}async function J(){try{const e=await(await fetch("https://sound-wave.b.goit.study/api/genres")).json();z(e),w=new _(n.genre,{searchEnabled:!1,shouldSort:!1,classNames:{itemSelectable:["select"],placeholder:"sort_placeholder"}})}catch(s){console.error("Помилка запиту жанрів:",s.message)}}function K(s){if(s.target.classList.contains("artist-learn-more-btn")){const t=s.target.closest(".artist-card").dataset.id;console.log("Clicked artist ID: ",t)}}async function R(s){const e=s.map(({genres:t,strArtist:r,strBiographyEN:i,strArtistThumb:o,_id:a})=>{const c=Array.isArray(t)?t.map(j=>`<li class="artist-genre-item">${j}</li>`).join(""):"",m=Y(i);return`
        <li class="artist-card"  data-id="${a}">
          <div class="artist-thumb">
      <img src="${o}" alt="${r}" class="artist-img">
          </div>
          <ul class="aritist-genre-list">${c}</ul>
              <h3 class="artist-name">${r}</h3>
              <p class="artist-bio">${m}</p>
            <button type="button" class="artist-learn-more-btn">Learn More
              <svg class="artist-btn-icon" width="24" height="24" fill="#fff">
                  <use href="${b}#icon-learn-more"></use>
              </svg>
          </button>
         </li>     `}).join("");n.artistsList.insertAdjacentHTML("beforeend",e)}async function p(s,e,t,r){try{N();const i=await A(s,e,t,r);if(n.empty.classList.add("is-hidden"),i.artists.length===0){g(),y(),n.empty.classList.remove("is-hidden"),console.log("Порожній список!");return}if(R(i.artists),y(),E=Math.ceil(i.totalArtists/8),r>=E){g(),y();return}}catch(i){console.log("Помилка:",i.message),g(),y();return}}async function Q(){l+=1,N();try{const s=await A(h,d,u,l);if(s.artists.length===0){g(),console.log("Список артистів порожній!");return}if(R(s.artists),y(),l>=E){g(),console.log("Сторінок більше, ніж контенту!");return}X()}catch(s){console.log("Помилка:",s.message);return}}function X(){if(!n.artistsList.firstElementChild)return;const{height:s}=n.artistsList.firstElementChild.getBoundingClientRect();window.scrollBy({top:s*2,behavior:"smooth"})}function Y(s){return s.length<=140?s:s.slice(0,140)+"..."}function Z(){n.loadMoreBtn.classList.remove("is-hidden")}function g(){n.loadMoreBtn.classList.add("is-hidden")}function I(){window.innerWidth<=1439&&n.artistForm.classList.toggle("is-hidden")}n.toggleButton.addEventListener("click",I);function x(){n.artistForm.classList.toggle("is-hidden",window.innerWidth<=1439)}x();window.addEventListener("resize",x);function N(){document.querySelector(".loader").classList.remove("hide-loader"),g()}function y(){document.querySelector(".loader").classList.add("hide-loader"),Z()}const ee=document.querySelector(".swiper-wrapper");let v=1;const L=5;let M=0,S=!1,k;async function te(){try{const e=await(await fetch(`https://sound-wave.b.goit.study/api/feedbacks?limit=${L}&page=${v}`)).json();M=parseInt(e.total,10);const t=B(e.data);ee.innerHTML=t,k=new O(".swiper",{loop:!1,centeredSlides:!1,spaceBetween:0,slidesPerView:1,pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},navigation:{nextEl:".right_btn",prevEl:".left_btn"},scrollbar:{el:".swiper-scrollbar"},on:{reachEnd:async()=>{if(!S&&!(v*L>=M)){S=!0,v++;try{const i=await(await fetch(`https://sound-wave.b.goit.study/api/feedbacks?limit=${L}&page=${v}`)).json(),o=B(i.data),a=document.createElement("div");a.innerHTML=o;const c=Array.from(a.children);k.appendSlide(c)}catch(r){console.error("Error fetching more feedbacks:",r)}S=!1}}}})}catch(s){console.error("Fetch error:",s)}}function se(s){return`
    <div class="fb_item swiper-slide">
      <div class="stars">${re(s.rating)}</div>
      <p class="fb_user_text">"${s.descr}"</p>
      <p class="fb_user_name">${s.name}</p>
    </div>
  `}function B(s){return s.map(e=>se(e)).join("")}function re(s){let e="";for(let r=1;r<=5;r++){const i=r<=s?"icon-purple-star":"icon-white-star";e+=`
      <svg width="20" height="20">
        <use href="${b}#${i}"></use>
      </svg>
    `}return e}document.addEventListener("DOMContentLoaded",()=>{te()});const q=document.querySelector(".left_btn"),T=document.querySelector(".right_btn");function H(){window.innerWidth>=768?(q.style.display="flex",T.style.display="flex"):(q.style.display="none",T.style.display="none")}H();window.addEventListener("resize",H);class ie{constructor(){var e,t,r,i,o;this.modal=document.getElementById("feedbackModal"),this.form=document.getElementById("feedbackForm"),this.overlay=(e=this.modal)==null?void 0:e.querySelector(".feedback-modal__overlay"),this.closeBtn=(t=this.modal)==null?void 0:t.querySelector(".feedback-modal__close"),this.submitBtn=(r=this.modal)==null?void 0:r.querySelector(".feedback-modal__submit"),this.loader=(i=this.modal)==null?void 0:i.querySelector(".feedback-modal__loader"),this.submitText=(o=this.modal)==null?void 0:o.querySelector(".feedback-modal__submit-text"),this.currentRating=0,this.isSubmitting=!1,this.init()}init(){this.modal&&(this.updateIconUrls(),this.bindEvents())}updateIconUrls(){this.modal.querySelectorAll("svg use").forEach(t=>{const r=t.getAttribute("href");r&&r.startsWith("#")&&t.setAttribute("href",`${b}${r}`)})}bindEvents(){var e,t,r;(e=this.closeBtn)==null||e.addEventListener("click",()=>this.close()),(t=this.overlay)==null||t.addEventListener("click",()=>this.close()),document.addEventListener("keydown",i=>{i.key==="Escape"&&this.isOpen()&&this.close()}),this.bindRatingEvents(),this.bindValidationEvents(),(r=this.form)==null||r.addEventListener("submit",i=>this.handleSubmit(i)),this.bindOpenButtons()}bindOpenButtons(){document.querySelectorAll("[data-feedback-modal]").forEach(r=>{r.addEventListener("click",()=>this.open())}),document.querySelectorAll(".feedback-modal-trigger").forEach(r=>{r.addEventListener("click",()=>this.open())})}bindRatingEvents(){var r,i;const e=(r=this.modal)==null?void 0:r.querySelectorAll(".feedback-modal__star");if(!e)return;e.forEach((o,a)=>{o.addEventListener("mouseenter",()=>{this.highlightStars(a+1)}),o.addEventListener("click",()=>{this.setRating(a+1)})});const t=(i=this.modal)==null?void 0:i.querySelector(".feedback-modal__rating");t==null||t.addEventListener("mouseleave",()=>{this.highlightStars(this.currentRating)})}bindValidationEvents(){var r,i;const e=(r=this.modal)==null?void 0:r.querySelector("#feedbackName"),t=(i=this.modal)==null?void 0:i.querySelector("#feedbackMessage");e==null||e.addEventListener("input",()=>this.validateName()),e==null||e.addEventListener("blur",()=>this.validateName()),t==null||t.addEventListener("input",()=>this.validateMessage()),t==null||t.addEventListener("blur",()=>this.validateMessage())}highlightStars(e){var r;const t=(r=this.modal)==null?void 0:r.querySelectorAll(".feedback-modal__star");t&&t.forEach((i,o)=>{const a=i.querySelector("use");o<e?(a==null||a.setAttribute("href",`${b}#icon-purple-star`),i.classList.add("active")):(a==null||a.setAttribute("href",`${b}#icon-white-star`),i.classList.remove("active"))})}setRating(e){this.currentRating=e,this.highlightStars(e),this.clearError("ratingError")}validateName(){var r;const e=(r=this.modal)==null?void 0:r.querySelector("#feedbackName"),t=(e==null?void 0:e.value.trim())||"";return t.length<2?(this.showError("nameError","Ім'я повинно містити мінімум 2 символи"),!1):t.length>16?(this.showError("nameError","Ім'я не повинно перевищувати 16 символів"),!1):(this.clearError("nameError"),!0)}validateMessage(){var r;const e=(r=this.modal)==null?void 0:r.querySelector("#feedbackMessage"),t=(e==null?void 0:e.value.trim())||"";return t.length<10?(this.showError("messageError","Повідомлення повинно містити мінімум 10 символів"),!1):t.length>512?(this.showError("messageError","Повідомлення не повинно перевищувати 512 символів"),!1):(this.clearError("messageError"),!0)}validateRating(){return this.currentRating===0?(this.showError("ratingError","Будь ласка, оберіть рейтинг"),!1):(this.clearError("ratingError"),!0)}showError(e,t){var i;const r=(i=this.modal)==null?void 0:i.querySelector(`#${e}`);r&&(r.textContent=t,r.style.display="block")}clearError(e){var r;const t=(r=this.modal)==null?void 0:r.querySelector(`#${e}`);t&&(t.textContent="",t.style.display="none")}clearAllErrors(){var t;const e=(t=this.modal)==null?void 0:t.querySelectorAll(".feedback-modal__error");e==null||e.forEach(r=>{r.textContent="",r.style.display="none"})}async handleSubmit(e){if(e.preventDefault(),this.isSubmitting)return;const t=this.validateName(),r=this.validateMessage(),i=this.validateRating();if(!t||!r||!i)return;const o=this.getFormData();await this.submitFeedback(o)}getFormData(){var r,i;const e=(r=this.modal)==null?void 0:r.querySelector("#feedbackName"),t=(i=this.modal)==null?void 0:i.querySelector("#feedbackMessage");return{name:(e==null?void 0:e.value.trim())||"",descr:(t==null?void 0:t.value.trim())||"",rating:this.currentRating}}async submitFeedback(e){try{this.setSubmittingState(!0);const t=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();console.log("Feedback submitted successfully:",r),this.showSuccessMessage(),setTimeout(()=>this.close(),2e3)}catch(t){console.error("Submit error:",t),this.showErrorMessage("Помилка при відправці. Спробуйте ще раз.")}finally{this.setSubmittingState(!1)}}setSubmittingState(e){this.isSubmitting=e,this.submitBtn&&(this.submitBtn.disabled=e),this.loader&&this.submitText&&(e?(this.loader.style.display="block",this.submitText.style.display="none"):(this.loader.style.display="none",this.submitText.style.display="block"))}showSuccessMessage(){this.submitText&&(this.submitText.textContent="Відправлено!")}showErrorMessage(e){this.showError("ratingError",e)}open(){if(!this.modal)return;this.modal.classList.add("is-open"),document.body.style.overflow="hidden";const e=this.modal.querySelector("#feedbackName");setTimeout(()=>e==null?void 0:e.focus(),100)}close(){this.modal&&(this.modal.classList.remove("is-open"),document.body.style.overflow="",this.resetForm())}resetForm(){var e;(e=this.form)==null||e.reset(),this.currentRating=0,this.highlightStars(0),this.clearAllErrors(),this.setSubmittingState(!1),this.submitText&&(this.submitText.textContent="Відправити")}isOpen(){var e;return((e=this.modal)==null?void 0:e.classList.contains("is-open"))||!1}}let f=null;document.addEventListener("DOMContentLoaded",()=>{f=new ie});window.openFeedbackModal=()=>{f==null||f.open()};window.closeFeedbackModal=()=>{f==null||f.close()};async function oe(){const s=document.querySelector(".images-1"),e=document.querySelector(".images-2");try{const r=await(await fetch("https://sound-wave.b.goit.study/api/artists?limit=20&page=1")).json(),o=await(await fetch("https://sound-wave.b.goit.study/api/artists?limit=20&page=3")).json(),a=r.artists.map(m=>m.strArtistThumb),c=o.artists.map(m=>m.strArtistThumb);s.innerHTML=$(a),e.innerHTML=$(c)}catch(t){console.error(t.message)}}function $(s){return s.map(e=>`<img src="${e}"/>`).join("")}oe();
//# sourceMappingURL=index.js.map
