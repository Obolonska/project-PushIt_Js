import{C as _,S as j}from"./assets/vendor-DZ3qZG1b.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();(()=>{const r={body:document.body,openModalBtn:document.querySelector("[data-menu-open]"),closeModalBtn:document.querySelector("[data-menu-close]"),links:document.querySelectorAll(".mobile-menu-link"),modal:document.querySelector("[data-modal]")};r.openModalBtn.addEventListener("click",e),r.closeModalBtn.addEventListener("click",t),r.links.forEach(s=>{s.addEventListener("click",t)});function e(){r.modal.classList.remove("is-hidden"),r.body.classList.add("menu-open")}function t(){r.modal.classList.add("is-hidden"),r.body.classList.remove("menu-open")}})();async function C(r,e,t,s=1,i=8){try{const o="https://sound-wave.b.goit.study/api/artists",a=new URLSearchParams;r&&a.append("name",r),e&&a.append("sortName",e),t&&a.append("genre",t),a.append("page",s),a.append("limit",i);const c=await fetch(`${o}?${a.toString()}`);if(!c.ok){const m=await c.text();throw new Error(`HTTP ${c.status}: ${m}`)}return await c.json()}catch(o){throw console.error("Помилка при запиті:",o),o}}const b="/project-PushIt_Js/assets/icons-mSHeLn5t.svg",n={artistsList:document.querySelector(".artists-cards-list"),loadMoreBtn:document.querySelector(".load-more"),form:document.querySelector(".artist-form"),input:document.querySelector(".form-input-filters"),resetBtn:document.querySelector("#resetButton"),resetBtnSearch:document.querySelector("#resetButtonSearch"),sorting:document.querySelector("#sorting"),genre:document.querySelector("#genre"),ul:document.querySelector("#artistsList"),toggleButton:document.querySelector(".search-and-filters"),artistForm:document.querySelector(".artist-form"),empty:document.querySelector(".empty-state"),loader:document.querySelector(".loader")};let l=1,w=0,d="",u="",h="",E;W();p(h,d,u,l);n.loadMoreBtn.addEventListener("click",z);n.artistsList.addEventListener("click",G);n.sorting.addEventListener("change",P);n.genre.addEventListener("change",V);n.form.addEventListener("submit",O);n.resetBtn.addEventListener("click",()=>{A.setChoiceByValue(""),E.setChoiceByValue(""),n.input.value="",d="",u="",h="",l=1,n.artistsList.innerHTML="",p(h,d,u,l)});n.resetBtnSearch.addEventListener("click",()=>{A.setChoiceByValue(""),E.setChoiceByValue(""),n.input.value="",d="",u="",h="",l=1,n.artistsList.innerHTML="",p(h,d,u,l)});const A=new _(n.sorting,{searchEnabled:!1,shouldSort:!1,classNames:{itemSelectable:["select"],placeholder:"sort_placeholder"}});async function O(r){r.preventDefault(),h=n.input.value.trim(),l=1,n.artistsList.innerHTML="",p(h,d,u,l),n.input.value="",n.genre.value="",n.sorting.value=""}async function P(r){d=r.target.value.trim(),l=1,n.artistsList.innerHTML="",p(h,d,u,l)}async function V(r){u=r.target.value.trim(),l=1,n.artistsList.innerHTML="",p(h,d,u,l)}function D({genre:r}){return`<option value="${r}">${r}</option>`}function U(r){const e=r.map(D).join("");n.genre.innerHTML=n.genre.innerHTML+e}async function W(){try{const e=await(await fetch("https://sound-wave.b.goit.study/api/genres")).json();U(e),E=new _(n.genre,{searchEnabled:!1,shouldSort:!1,classNames:{itemSelectable:["select"],placeholder:"sort_placeholder"}})}catch(r){console.error("Помилка запиту жанрів:",r.message)}}function G(r){if(r.target.classList.contains("artist-learn-more-btn")){const t=r.target.closest(".artist-card").dataset.id;console.log("Clicked artist ID: ",t)}}async function F(r){const e=r.map(({genres:t,strArtist:s,strBiographyEN:i,strArtistThumb:o,_id:a})=>{const c=Array.isArray(t)?t.map(H=>`<li class="artist-genre-item">${H}</li>`).join(""):"",m=K(i);return`
        <li class="artist-card"  data-id="${a}">
          <div class="artist-thumb">
      <img src="${o}" alt="${s}" class="artist-img">
          </div>
          <ul class="aritist-genre-list">${c}</ul>
              <h3 class="artist-name">${s}</h3>
              <p class="artist-bio">${m}</p>
            <button type="button" class="artist-learn-more-btn">Learn More
              <svg class="artist-btn-icon" width="24" height="24" fill="#fff">
                  <use href="${b}#icon-learn-more"></use>
              </svg>
          </button>
         </li>     `}).join("");n.artistsList.insertAdjacentHTML("beforeend",e)}async function p(r,e,t,s){try{x();const i=await C(r,e,t,s);if(n.empty.classList.add("is-hidden"),i.artists.length===0){g(),y(),n.empty.classList.remove("is-hidden"),console.log("Порожній список!");return}if(F(i.artists),y(),w=Math.ceil(i.totalArtists/8),s>=w){g(),y();return}}catch(i){console.log("Помилка:",i.message),g(),y();return}}async function z(){l+=1,x();try{const r=await C(h,d,u,l);if(r.artists.length===0){g(),console.log("Список артистів порожній!");return}if(F(r.artists),y(),l>=w){g(),console.log("Сторінок більше, ніж контенту!");return}J()}catch(r){console.log("Помилка:",r.message);return}}function J(){if(!n.artistsList.firstElementChild)return;const{height:r}=n.artistsList.firstElementChild.getBoundingClientRect();window.scrollBy({top:r*2,behavior:"smooth"})}function K(r){return r.length<=140?r:r.slice(0,140)+"..."}function Q(){n.loadMoreBtn.classList.remove("is-hidden")}function g(){n.loadMoreBtn.classList.add("is-hidden")}function X(){window.innerWidth<=1439&&n.artistForm.classList.toggle("is-hidden")}n.toggleButton.addEventListener("click",X);function R(){n.artistForm.classList.toggle("is-hidden",window.innerWidth<=1439)}R();window.addEventListener("resize",R);function x(){document.querySelector(".loader").classList.remove("hide-loader"),g()}function y(){document.querySelector(".loader").classList.add("hide-loader"),Q()}const Y=document.querySelector(".swiper-wrapper");let v=1;const L=5;let k=0,S=!1,M;async function Z(){try{const e=await(await fetch(`https://sound-wave.b.goit.study/api/feedbacks?limit=${L}&page=${v}`)).json();k=parseInt(e.total,10);const t=q(e.data);Y.innerHTML=t,M=new j(".swiper",{loop:!1,centeredSlides:!1,spaceBetween:0,slidesPerView:1,pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},navigation:{nextEl:".right_btn",prevEl:".left_btn"},scrollbar:{el:".swiper-scrollbar"},on:{reachEnd:async()=>{if(!S&&!(v*L>=k)){S=!0,v++;try{const i=await(await fetch(`https://sound-wave.b.goit.study/api/feedbacks?limit=${L}&page=${v}`)).json(),o=q(i.data),a=document.createElement("div");a.innerHTML=o;const c=Array.from(a.children);M.appendSlide(c)}catch(s){console.error("Error fetching more feedbacks:",s)}S=!1}}}})}catch(r){console.error("Fetch error:",r)}}function I(r){return`
    <div class="fb_item swiper-slide">
      <div class="stars">${ee(r.rating)}</div>
      <p class="fb_user_text">"${r.descr}"</p>
      <p class="fb_user_name">${r.name}</p>
    </div>
  `}function q(r){return r.map(e=>I(e)).join("")}function ee(r){let e="";for(let s=1;s<=5;s++){const i=s<=r?"icon-purple-star":"icon-white-star";e+=`
      <svg width="20" height="20">
        <use href="${b}#${i}"></use>
      </svg>
    `}return e}document.addEventListener("DOMContentLoaded",()=>{Z()});const B=document.querySelector(".left_btn"),T=document.querySelector(".right_btn");function N(){window.innerWidth>=768?(B.style.display="flex",T.style.display="flex"):(B.style.display="none",T.style.display="none")}N();window.addEventListener("resize",N);class te{constructor(){var e,t,s,i,o;this.modal=document.getElementById("feedbackModal"),this.form=document.getElementById("feedbackForm"),this.overlay=(e=this.modal)==null?void 0:e.querySelector(".feedback-modal__overlay"),this.closeBtn=(t=this.modal)==null?void 0:t.querySelector(".feedback-modal__close"),this.submitBtn=(s=this.modal)==null?void 0:s.querySelector(".feedback-modal__submit"),this.loader=(i=this.modal)==null?void 0:i.querySelector(".feedback-modal__loader"),this.submitText=(o=this.modal)==null?void 0:o.querySelector(".feedback-modal__submit-text"),this.currentRating=0,this.isSubmitting=!1,this.init()}init(){this.modal&&(this.updateIconUrls(),this.bindEvents())}updateIconUrls(){this.modal.querySelectorAll("svg use").forEach(t=>{const s=t.getAttribute("href");s&&s.startsWith("#")&&t.setAttribute("href",`${b}${s}`)})}bindEvents(){var e,t,s;(e=this.closeBtn)==null||e.addEventListener("click",()=>this.close()),(t=this.overlay)==null||t.addEventListener("click",()=>this.close()),document.addEventListener("keydown",i=>{i.key==="Escape"&&this.isOpen()&&this.close()}),this.bindRatingEvents(),this.bindValidationEvents(),(s=this.form)==null||s.addEventListener("submit",i=>this.handleSubmit(i)),this.bindOpenButtons()}bindOpenButtons(){document.querySelectorAll("[data-feedback-modal]").forEach(s=>{s.addEventListener("click",()=>this.open())}),document.querySelectorAll(".feedback-modal-trigger").forEach(s=>{s.addEventListener("click",()=>this.open())})}bindRatingEvents(){var s,i;const e=(s=this.modal)==null?void 0:s.querySelectorAll(".feedback-modal__star");if(!e)return;e.forEach((o,a)=>{o.addEventListener("mouseenter",()=>{this.highlightStars(a+1)}),o.addEventListener("click",()=>{this.setRating(a+1)})});const t=(i=this.modal)==null?void 0:i.querySelector(".feedback-modal__rating");t==null||t.addEventListener("mouseleave",()=>{this.highlightStars(this.currentRating)})}bindValidationEvents(){var s,i;const e=(s=this.modal)==null?void 0:s.querySelector("#feedbackName"),t=(i=this.modal)==null?void 0:i.querySelector("#feedbackMessage");e==null||e.addEventListener("input",()=>this.validateName()),e==null||e.addEventListener("blur",()=>this.validateName()),t==null||t.addEventListener("input",()=>this.validateMessage()),t==null||t.addEventListener("blur",()=>this.validateMessage())}highlightStars(e){var s;const t=(s=this.modal)==null?void 0:s.querySelectorAll(".feedback-modal__star");t&&t.forEach((i,o)=>{const a=i.querySelector("use");o<e?(a==null||a.setAttribute("href",`${b}#icon-purple-star`),i.classList.add("active")):(a==null||a.setAttribute("href",`${b}#icon-white-star`),i.classList.remove("active"))})}setRating(e){this.currentRating=e,this.highlightStars(e),this.clearError("ratingError")}validateName(){var s;const e=(s=this.modal)==null?void 0:s.querySelector("#feedbackName"),t=(e==null?void 0:e.value.trim())||"";return t.length<2?(this.showError("nameError","Ім'я повинно містити мінімум 2 символи"),!1):t.length>16?(this.showError("nameError","Ім'я не повинно перевищувати 16 символів"),!1):(this.clearError("nameError"),!0)}validateMessage(){var s;const e=(s=this.modal)==null?void 0:s.querySelector("#feedbackMessage"),t=(e==null?void 0:e.value.trim())||"";return t.length<10?(this.showError("messageError","Повідомлення повинно містити мінімум 10 символів"),!1):t.length>512?(this.showError("messageError","Повідомлення не повинно перевищувати 512 символів"),!1):(this.clearError("messageError"),!0)}validateRating(){return this.currentRating===0?(this.showError("ratingError","Будь ласка, оберіть рейтинг"),!1):(this.clearError("ratingError"),!0)}showError(e,t){var i;const s=(i=this.modal)==null?void 0:i.querySelector(`#${e}`);s&&(s.textContent=t,s.style.display="block")}clearError(e){var s;const t=(s=this.modal)==null?void 0:s.querySelector(`#${e}`);t&&(t.textContent="",t.style.display="none")}clearAllErrors(){var t;const e=(t=this.modal)==null?void 0:t.querySelectorAll(".feedback-modal__error");e==null||e.forEach(s=>{s.textContent="",s.style.display="none"})}async handleSubmit(e){if(e.preventDefault(),this.isSubmitting)return;const t=this.validateName(),s=this.validateMessage(),i=this.validateRating();if(!t||!s||!i)return;const o=this.getFormData();await this.submitFeedback(o)}getFormData(){var s,i;const e=(s=this.modal)==null?void 0:s.querySelector("#feedbackName"),t=(i=this.modal)==null?void 0:i.querySelector("#feedbackMessage");return{name:(e==null?void 0:e.value.trim())||"",descr:(t==null?void 0:t.value.trim())||"",rating:this.currentRating}}async submitFeedback(e){try{this.setSubmittingState(!0);const t=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();console.log("Feedback submitted successfully:",s),this.showSuccessMessage(),setTimeout(()=>this.close(),2e3)}catch(t){console.error("Submit error:",t),this.showErrorMessage("Помилка при відправці. Спробуйте ще раз.")}finally{this.setSubmittingState(!1)}}setSubmittingState(e){this.isSubmitting=e,this.submitBtn&&(this.submitBtn.disabled=e),this.loader&&this.submitText&&(e?(this.loader.style.display="block",this.submitText.style.display="none"):(this.loader.style.display="none",this.submitText.style.display="block"))}showSuccessMessage(){this.submitText&&(this.submitText.textContent="Відправлено!")}showErrorMessage(e){this.showError("ratingError",e)}open(){if(!this.modal)return;this.modal.classList.add("is-open"),document.body.style.overflow="hidden";const e=this.modal.querySelector("#feedbackName");setTimeout(()=>e==null?void 0:e.focus(),100)}close(){this.modal&&(this.modal.classList.remove("is-open"),document.body.style.overflow="",this.resetForm())}resetForm(){var e;(e=this.form)==null||e.reset(),this.currentRating=0,this.highlightStars(0),this.clearAllErrors(),this.setSubmittingState(!1),this.submitText&&(this.submitText.textContent="Відправити")}isOpen(){var e;return((e=this.modal)==null?void 0:e.classList.contains("is-open"))||!1}}let f=null;document.addEventListener("DOMContentLoaded",()=>{f=new te});window.openFeedbackModal=()=>{f==null||f.open()};window.closeFeedbackModal=()=>{f==null||f.close()};async function se(){const r=document.querySelector(".images-1"),e=document.querySelector(".images-2");try{const s=await(await fetch("https://sound-wave.b.goit.study/api/artists?limit=20&page=1")).json(),o=await(await fetch("https://sound-wave.b.goit.study/api/artists?limit=20&page=3")).json(),a=s.artists.map(m=>m.strArtistThumb),c=o.artists.map(m=>m.strArtistThumb);r.innerHTML=$(a),e.innerHTML=$(c)}catch(t){console.error(t.message)}}function $(r){return r.map(e=>`<img src="${e}"/>`).join("")}se();
//# sourceMappingURL=index.js.map
