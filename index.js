var U=Object.defineProperty;var W=(t,e,s)=>e in t?U(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var L=(t,e,s)=>W(t,typeof e!="symbol"?e+"":e,s);import{C as x,S as G}from"./assets/vendor-DZ3qZG1b.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();(()=>{const t={body:document.body,openModalBtn:document.querySelector("[data-menu-open]"),closeModalBtn:document.querySelector("[data-menu-close]"),links:document.querySelectorAll(".mobile-menu-link"),modal:document.querySelector("[data-modal]")};t.openModalBtn.addEventListener("click",e),t.closeModalBtn.addEventListener("click",s),t.links.forEach(r=>{r.addEventListener("click",s)});function e(){t.modal.classList.remove("is-hidden"),t.body.classList.add("menu-open")}function s(){t.modal.classList.add("is-hidden"),t.body.classList.remove("menu-open")}})();async function F(t,e,s,r=1,i=8){try{const n="https://sound-wave.b.goit.study/api/artists",a=new URLSearchParams;t&&a.append("name",t),e&&a.append("sortName",e),s&&a.append("genre",s),a.append("page",r),a.append("limit",i);const d=await fetch(`${n}?${a.toString()}`);if(!d.ok){const f=await d.text();throw new Error(`HTTP ${d.status}: ${f}`)}return await d.json()}catch(n){throw console.error("Помилка при запиті:",n),n}}const v="/project-PushIt_Js/assets/icons-mSHeLn5t.svg";class w{static show(){this.isVisible=!0,this.modalElement&&this.modalElement.classList.add("show")}static hide(){this.isVisible=!1,this.modalElement.classList.remove("show")}}L(w,"isVisible",!1),L(w,"modalElement",document.querySelector(".loader-backdrop"));function z(t){const e=Math.floor(t/1e3),s=Math.floor(e/60),r=e%60,i=r<10?"0"+r:r;return`${s}:${i}`}function J(t,e=10){return t.length>e?t.slice(0,e)+"...":t}class _{static block(){this.element.classList.add("body-hidden")}static unblock(){this.element.classList.remove("body-hidden")}}L(_,"element",document.body);const c={autorTitle:document.querySelector(".name-artist"),biography:document.querySelector(".artist-description__bio p"),years:document.querySelector(".album-info__year .album-info__description"),sex:document.querySelector(".album-info__sex .album-info__description"),members:document.querySelector(".album-info__members .album-info__description"),country:document.querySelector(".album-info__country .album-info__description"),avatar:document.querySelector(".artist-description__left img"),albums:document.querySelector(".albums"),artistsLearnMore:document.querySelector(".artist-learn-more-btn"),backdrop:document.querySelector(".artist-modal-backdrop"),modal:document.querySelector(".artist-modal-backdrop .modal"),closeBtn:document.querySelector(".modal .btn-close"),genres:document.querySelector(".artist-description__genres")};c.closeBtn.addEventListener("click",()=>{R()});c.backdrop.addEventListener("click",t=>{t.currentTarget===t.target&&R()});const Z="https://sound-wave.b.goit.study/api",K=async t=>{console.log(t);try{const s=await(await fetch(`${Z}/artists/${t}/albums`)).json();console.log(s),ee(s.genres),te(s),se(s.albumsList),w.show(),Y()}catch{}finally{w.hide()}};function Y(){_.block(),c.backdrop.classList.remove("hidden")}function R(){c.backdrop.classList.add("hidden"),_.unblock()}function Q(t){return`
  <li>${t}</li>
  `}function X({strAlbum:t,tracks:e}){return`
<li class="albums__item-wrapper ">
           <div class="albums__item album-item">
            <h3 class="album-item__title">${t}</h3>
            <table class="album-item__tracklist-table tracklist">
              <thead class="tracklist__header">
              <tr>
                <th class="head-name-track">Track</th>
                <th class="head-name-time">Time</th>
                <th class="head-name-link">Link</th>
              </tr>
              </thead>
              <tbody>
                ${re(e)}
              </tbody>
            </table>
</div>
          </li>
`}function I({intDuration:t,movie:e,strTrack:s}){return`
  <tr class="track">
                <td class="name-track">${J(s,20)}</td>
                <td class="time">${z(t)}</td>
                <td class="img-icon">
                    ${ne(e)}
                </td>
              </tr>
  `}function ee(t){c.genres.innerHTML=t.map(e=>Q(e)).join("")}function te({strArtist:t,intDiedYear:e,intFormedYear:s,intMembers:r,strArtistThumb:i,strBiographyEN:n,strGender:a,strCountry:d}){c.sex.innerHTML=a,c.members.innerHTML=r,c.biography.innerHTML=n,c.years.innerHTML=ie(s,e),c.country.innerHTML=d,c.autorTitle.innerHTML=t,c.avatar.src=i}function se(t){c.albums.innerHTML=t.map(e=>X(e)).join("")}function re(t){return t.map(e=>I(e)).join("")}function ie(t,e){return`${t}–${e??"present"}`}function ne(t){return t?`<a href="${t}" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21.5933 7.20301C21.4794 6.78041 21.2568 6.39501 20.9477 6.08518C20.6386 5.77534 20.2537 5.55187 19.8313 5.43701C18.2653 5.00701 12.0003 5.00001 12.0003 5.00001C12.0003 5.00001 5.73633 4.99301 4.16933 5.40401C3.74725 5.52415 3.36315 5.75078 3.0539 6.06214C2.74464 6.3735 2.52062 6.75913 2.40333 7.18201C1.99033 8.74801 1.98633 11.996 1.98633 11.996C1.98633 11.996 1.98233 15.26 2.39233 16.81C2.62233 17.667 3.29733 18.344 4.15533 18.575C5.73733 19.005 11.9853 19.012 11.9853 19.012C11.9853 19.012 18.2503 19.019 19.8163 18.609C20.2388 18.4943 20.6241 18.2714 20.934 17.9622C21.2439 17.653 21.4677 17.2682 21.5833 16.846C21.9973 15.281 22.0003 12.034 22.0003 12.034C22.0003 12.034 22.0203 8.76901 21.5933 7.20301ZM9.99633 15.005L10.0013 9.00501L15.2083 12.01L9.99633 15.005Z" fill="white"/></svg></a>`:""}const o={artistsList:document.querySelector(".artists-cards-list"),loadMoreBtn:document.querySelector(".load-more"),form:document.querySelector(".artist-form"),input:document.querySelector(".form-input-filters"),resetBtn:document.querySelector("#resetButton"),resetBtnSearch:document.querySelector("#resetButtonSearch"),sorting:document.querySelector("#sorting"),genre:document.querySelector("#genre"),ul:document.querySelector("#artistsList"),toggleButton:document.querySelector(".search-and-filters"),artistForm:document.querySelector(".artist-form"),empty:document.querySelector(".empty-state"),loader:document.querySelector(".loader")};let l=1,M=0,u="",m="",h="",q;ue();p(h,u,m,l);o.loadMoreBtn.addEventListener("click",he);o.artistsList.addEventListener("click",me);o.sorting.addEventListener("change",ae);o.genre.addEventListener("change",le);o.form.addEventListener("submit",oe);o.resetBtn.addEventListener("click",()=>{j.setChoiceByValue(""),q.setChoiceByValue(""),o.input.value="",u="",m="",h="",l=1,o.artistsList.innerHTML="",p(h,u,m,l)});o.resetBtnSearch.addEventListener("click",()=>{j.setChoiceByValue(""),q.setChoiceByValue(""),o.input.value="",u="",m="",h="",l=1,o.artistsList.innerHTML="",p(h,u,m,l)});const j=new x(o.sorting,{searchEnabled:!1,shouldSort:!1,classNames:{itemSelectable:["select"],placeholder:"sort_placeholder"}});async function oe(t){t.preventDefault(),h=o.input.value.trim(),l=1,o.artistsList.innerHTML="",p(h,u,m,l),o.input.value="",o.genre.value="",o.sorting.value=""}async function ae(t){u=t.target.value.trim(),l=1,o.artistsList.innerHTML="",p(h,u,m,l)}async function le(t){m=t.target.value.trim(),l=1,o.artistsList.innerHTML="",p(h,u,m,l)}function ce({genre:t}){return`<option value="${t}">${t}</option>`}function de(t){const e=t.map(ce).join("");o.genre.innerHTML=o.genre.innerHTML+e}async function ue(){try{const e=await(await fetch("https://sound-wave.b.goit.study/api/genres")).json();de(e),q=new x(o.genre,{searchEnabled:!1,shouldSort:!1,classNames:{itemSelectable:["select"],placeholder:"sort_placeholder"}})}catch(t){console.error("Помилка запиту жанрів:",t.message)}}async function me(t){if(t.target.classList.contains("artist-learn-more-btn")){const s=t.target.closest(".artist-card").dataset.id;console.log("Clicked artist ID: ",s),K(s)}}async function N(t){const e=t.map(({genres:s,strArtist:r,strBiographyEN:i,strArtistThumb:n,_id:a})=>{const d=Array.isArray(s)?s.map(D=>`<li class="artist-genre-item">${D}</li>`).join(""):"",f=ge(i);return`
        <li class="artist-card"  data-id="${a}">
          <div class="artist-thumb">
      <img src="${n}" alt="${r}" class="artist-img">
          </div>
          <ul class="aritist-genre-list">${d}</ul>
              <h3 class="artist-name">${r}</h3>
              <p class="artist-bio">${f}</p>
            <button type="button" class="artist-learn-more-btn">Learn More
              <svg class="artist-btn-icon" width="24" height="24" fill="#fff">
                  <use href="${v}#icon-learn-more"></use>
              </svg>
          </button>
         </li>     `}).join("");o.artistsList.insertAdjacentHTML("beforeend",e)}async function p(t,e,s,r){try{P();const i=await F(t,e,s,r);if(o.empty.classList.add("is-hidden"),i.artists.length===0){b(),y(),o.empty.classList.remove("is-hidden"),console.log("Порожній список!");return}if(N(i.artists),y(),M=Math.ceil(i.totalArtists/8),r>=M){b(),y();return}}catch(i){console.log("Помилка:",i.message),b(),y();return}}async function he(){l+=1,P();try{const t=await F(h,u,m,l);if(t.artists.length===0){b(),console.log("Список артистів порожній!");return}if(N(t.artists),y(),l>=M){b(),console.log("Сторінок більше, ніж контенту!");return}fe()}catch(t){console.log("Помилка:",t.message);return}}function fe(){if(!o.artistsList.firstElementChild)return;const{height:t}=o.artistsList.firstElementChild.getBoundingClientRect();window.scrollBy({top:t*2,behavior:"smooth"})}function ge(t){return t.length<=140?t:t.slice(0,140)+"..."}function be(){o.loadMoreBtn.classList.remove("is-hidden")}function b(){o.loadMoreBtn.classList.add("is-hidden")}function pe(){window.innerWidth<=1439&&o.artistForm.classList.toggle("is-hidden")}o.toggleButton.addEventListener("click",pe);function O(){o.artistForm.classList.toggle("is-hidden",window.innerWidth<=1439)}O();window.addEventListener("resize",O);function P(){document.querySelector(".loader").classList.remove("hide-loader"),b()}function y(){document.querySelector(".loader").classList.add("hide-loader"),be()}const ye=document.querySelector(".swiper-wrapper");let S=1;const E=5;let T=0,k=!1,$;async function ve(){try{const e=await(await fetch(`https://sound-wave.b.goit.study/api/feedbacks?limit=${E}&page=${S}`)).json();T=parseInt(e.total,10);const s=B(e.data);ye.innerHTML=s,$=new G(".swiper",{loop:!1,centeredSlides:!1,spaceBetween:0,slidesPerView:1,pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},navigation:{nextEl:".right_btn",prevEl:".left_btn"},scrollbar:{el:".swiper-scrollbar"},on:{reachEnd:async()=>{if(!k&&!(S*E>=T)){k=!0,S++;try{const i=await(await fetch(`https://sound-wave.b.goit.study/api/feedbacks?limit=${E}&page=${S}`)).json(),n=B(i.data),a=document.createElement("div");a.innerHTML=n;const d=Array.from(a.children);$.appendSlide(d)}catch(r){console.error("Error fetching more feedbacks:",r)}k=!1}}}})}catch(t){console.error("Fetch error:",t)}}function Le(t){return`
    <div class="fb_item swiper-slide">
      <div class="stars">${Se(t.rating)}</div>
      <p class="fb_user_text">"${t.descr}"</p>
      <p class="fb_user_name">${t.name}</p>
    </div>
  `}function B(t){return t.map(e=>Le(e)).join("")}function Se(t){let e="";for(let r=1;r<=5;r++){const i=r<=t?"icon-purple-star":"icon-white-star";e+=`
      <svg width="20" height="20">
        <use href="${v}#${i}"></use>
      </svg>
    `}return e}document.addEventListener("DOMContentLoaded",()=>{ve()});const C=document.querySelector(".left_btn"),A=document.querySelector(".right_btn");function V(){window.innerWidth>=768?(C.style.display="flex",A.style.display="flex"):(C.style.display="none",A.style.display="none")}V();window.addEventListener("resize",V);class we{constructor(){var e,s,r,i,n;this.modal=document.getElementById("feedbackModal"),this.form=document.getElementById("feedbackForm"),this.overlay=(e=this.modal)==null?void 0:e.querySelector(".feedback-modal__overlay"),this.closeBtn=(s=this.modal)==null?void 0:s.querySelector(".feedback-modal__close"),this.submitBtn=(r=this.modal)==null?void 0:r.querySelector(".feedback-modal__submit"),this.loader=(i=this.modal)==null?void 0:i.querySelector(".feedback-modal__loader"),this.submitText=(n=this.modal)==null?void 0:n.querySelector(".feedback-modal__submit-text"),this.currentRating=0,this.isSubmitting=!1,this.init()}init(){this.modal&&(this.updateIconUrls(),this.bindEvents())}updateIconUrls(){this.modal.querySelectorAll("svg use").forEach(s=>{const r=s.getAttribute("href");r&&r.startsWith("#")&&s.setAttribute("href",`${v}${r}`)})}bindEvents(){var e,s,r;(e=this.closeBtn)==null||e.addEventListener("click",()=>this.close()),(s=this.overlay)==null||s.addEventListener("click",()=>this.close()),document.addEventListener("keydown",i=>{i.key==="Escape"&&this.isOpen()&&this.close()}),this.bindRatingEvents(),this.bindValidationEvents(),(r=this.form)==null||r.addEventListener("submit",i=>this.handleSubmit(i)),this.bindOpenButtons()}bindOpenButtons(){document.querySelectorAll("[data-feedback-modal]").forEach(r=>{r.addEventListener("click",()=>this.open())}),document.querySelectorAll(".feedback-modal-trigger").forEach(r=>{r.addEventListener("click",()=>this.open())})}bindRatingEvents(){var r,i;const e=(r=this.modal)==null?void 0:r.querySelectorAll(".feedback-modal__star");if(!e)return;e.forEach((n,a)=>{n.addEventListener("mouseenter",()=>{this.highlightStars(a+1)}),n.addEventListener("click",()=>{this.setRating(a+1)})});const s=(i=this.modal)==null?void 0:i.querySelector(".feedback-modal__rating");s==null||s.addEventListener("mouseleave",()=>{this.highlightStars(this.currentRating)})}bindValidationEvents(){var r,i;const e=(r=this.modal)==null?void 0:r.querySelector("#feedbackName"),s=(i=this.modal)==null?void 0:i.querySelector("#feedbackMessage");e==null||e.addEventListener("input",()=>this.validateName()),e==null||e.addEventListener("blur",()=>this.validateName()),s==null||s.addEventListener("input",()=>this.validateMessage()),s==null||s.addEventListener("blur",()=>this.validateMessage())}highlightStars(e){var r;const s=(r=this.modal)==null?void 0:r.querySelectorAll(".feedback-modal__star");s&&s.forEach((i,n)=>{const a=i.querySelector("use");n<e?(a==null||a.setAttribute("href",`${v}#icon-purple-star`),i.classList.add("active")):(a==null||a.setAttribute("href",`${v}#icon-white-star`),i.classList.remove("active"))})}setRating(e){this.currentRating=e,this.highlightStars(e),this.clearError("ratingError")}validateName(){var r;const e=(r=this.modal)==null?void 0:r.querySelector("#feedbackName"),s=(e==null?void 0:e.value.trim())||"";return s.length<2?(this.showError("nameError","Ім'я повинно містити мінімум 2 символи"),!1):s.length>16?(this.showError("nameError","Ім'я не повинно перевищувати 16 символів"),!1):(this.clearError("nameError"),!0)}validateMessage(){var r;const e=(r=this.modal)==null?void 0:r.querySelector("#feedbackMessage"),s=(e==null?void 0:e.value.trim())||"";return s.length<10?(this.showError("messageError","Повідомлення повинно містити мінімум 10 символів"),!1):s.length>512?(this.showError("messageError","Повідомлення не повинно перевищувати 512 символів"),!1):(this.clearError("messageError"),!0)}validateRating(){return this.currentRating===0?(this.showError("ratingError","Будь ласка, оберіть рейтинг"),!1):(this.clearError("ratingError"),!0)}showError(e,s){var i;const r=(i=this.modal)==null?void 0:i.querySelector(`#${e}`);r&&(r.textContent=s,r.style.display="block")}clearError(e){var r;const s=(r=this.modal)==null?void 0:r.querySelector(`#${e}`);s&&(s.textContent="",s.style.display="none")}clearAllErrors(){var s;const e=(s=this.modal)==null?void 0:s.querySelectorAll(".feedback-modal__error");e==null||e.forEach(r=>{r.textContent="",r.style.display="none"})}async handleSubmit(e){if(e.preventDefault(),this.isSubmitting)return;const s=this.validateName(),r=this.validateMessage(),i=this.validateRating();if(!s||!r||!i)return;const n=this.getFormData();await this.submitFeedback(n)}getFormData(){var r,i;const e=(r=this.modal)==null?void 0:r.querySelector("#feedbackName"),s=(i=this.modal)==null?void 0:i.querySelector("#feedbackMessage");return{name:(e==null?void 0:e.value.trim())||"",descr:(s==null?void 0:s.value.trim())||"",rating:this.currentRating}}async submitFeedback(e){try{this.setSubmittingState(!0);const s=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const r=await s.json();console.log("Feedback submitted successfully:",r),this.showSuccessMessage(),setTimeout(()=>this.close(),2e3)}catch(s){console.error("Submit error:",s),this.showErrorMessage("Помилка при відправці. Спробуйте ще раз.")}finally{this.setSubmittingState(!1)}}setSubmittingState(e){this.isSubmitting=e,this.submitBtn&&(this.submitBtn.disabled=e),this.loader&&this.submitText&&(e?(this.loader.style.display="block",this.submitText.style.display="none"):(this.loader.style.display="none",this.submitText.style.display="block"))}showSuccessMessage(){this.submitText&&(this.submitText.textContent="Відправлено!")}showErrorMessage(e){this.showError("ratingError",e)}open(){if(!this.modal)return;this.modal.classList.add("is-open"),document.body.style.overflow="hidden";const e=this.modal.querySelector("#feedbackName");setTimeout(()=>e==null?void 0:e.focus(),100)}close(){this.modal&&(this.modal.classList.remove("is-open"),document.body.style.overflow="",this.resetForm())}resetForm(){var e;(e=this.form)==null||e.reset(),this.currentRating=0,this.highlightStars(0),this.clearAllErrors(),this.setSubmittingState(!1),this.submitText&&(this.submitText.textContent="Відправити")}isOpen(){var e;return((e=this.modal)==null?void 0:e.classList.contains("is-open"))||!1}}let g=null;document.addEventListener("DOMContentLoaded",()=>{g=new we});window.openFeedbackModal=()=>{g==null||g.open()};window.closeFeedbackModal=()=>{g==null||g.close()};async function Ee(){const t=document.querySelector(".images-1"),e=document.querySelector(".images-2");try{const r=await(await fetch("https://sound-wave.b.goit.study/api/artists?limit=20&page=1")).json(),n=await(await fetch("https://sound-wave.b.goit.study/api/artists?limit=20&page=3")).json(),a=r.artists.map(f=>f.strArtistThumb),d=n.artists.map(f=>f.strArtistThumb);t.innerHTML=H(a),e.innerHTML=H(d)}catch(s){console.error(s.message)}}function H(t){return t.map(e=>`<img src="${e}"/>`).join("")}Ee();
//# sourceMappingURL=index.js.map
