var W=Object.defineProperty;var z=(t,e,s)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var S=(t,e,s)=>z(t,typeof e!="symbol"?e+"":e,s);import{C as R,S as G}from"./assets/vendor-DZ3qZG1b.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();(()=>{const t={body:document.body,openModalBtn:document.querySelector("[data-menu-open]"),closeModalBtn:document.querySelector("[data-menu-close]"),links:document.querySelectorAll(".mobile-menu-link"),modal:document.querySelector("[data-modal]")};t.openModalBtn.addEventListener("click",e),t.closeModalBtn.addEventListener("click",s),t.links.forEach(r=>{r.addEventListener("click",s)});function e(){t.modal.classList.remove("is-hidden"),t.body.classList.add("menu-open")}function s(){t.modal.classList.add("is-hidden"),t.body.classList.remove("menu-open")}})();async function j(t,e,s,r=1,i=8){try{const n="https://sound-wave.b.goit.study/api/artists",o=new URLSearchParams;t&&o.append("name",t),e&&o.append("sortName",e),s&&o.append("genre",s),o.append("page",r),o.append("limit",i);const l=await fetch(`${n}?${o.toString()}`);if(!l.ok){const d=await l.text();throw new Error(`HTTP ${l.status}: ${d}`)}return await l.json()}catch(n){throw console.error("Помилка при запиті:",n),n}}const v="/project-PushIt_Js/assets/icons-mSHeLn5t.svg";class E{static show(){this.isVisible=!0,this.modalElement&&this.modalElement.classList.add("show")}static hide(){this.isVisible=!1,this.modalElement.classList.remove("show")}}S(E,"isVisible",!1),S(E,"modalElement",document.querySelector(".loader-backdrop"));function J(t){const e=Math.floor(t/1e3),s=Math.floor(e/60),r=e%60,i=r<10?"0"+r:r;return`${s}:${i}`}function Z(t,e=10){return t.length>e?t.slice(0,e)+"...":t}class q{static block(){this.element.classList.add("body-hidden")}static unblock(){this.element.classList.remove("body-hidden")}}S(q,"element",document.body);const c={autorTitle:document.querySelector(".name-artist"),biography:document.querySelector(".artist-description__bio p"),years:document.querySelector(".album-info__year .album-info__description"),sex:document.querySelector(".album-info__sex .album-info__description"),members:document.querySelector(".album-info__members .album-info__description"),country:document.querySelector(".album-info__country .album-info__description"),avatar:document.querySelector(".artist-description__left"),albums:document.querySelector(".albums"),artistsLearnMore:document.querySelector(".artist-learn-more-btn"),backdrop:document.querySelector(".artist-modal-backdrop"),modal:document.querySelector(".artist-modal-backdrop .modal"),closeBtn:document.querySelector(".modal .btn-close"),genres:document.querySelector(".artist-description__genres"),modalScrolled:document.querySelector(".modal-scrolled")};c.closeBtn.addEventListener("click",()=>{T()});window.addEventListener("keydown",N);c.backdrop.addEventListener("click",ae);const K="https://sound-wave.b.goit.study/api",Y=async t=>{try{E.show();const s=await(await fetch(`${K}/artists/${t}/albums`)).json();te(s.genres),se(s),re(s.albumsList),I()}catch{}finally{E.hide()}};function I(){c.modalScrolled.scrollTo(0,0),q.block(),c.backdrop.classList.remove("hidden")}function T(){c.modalScrolled.scrollTo(0,0),c.backdrop.classList.add("hidden"),q.unblock()}function Q(t){return`
  <li>${t}</li>
  `}function X({strAlbum:t,tracks:e}){return`
<li class="albums__item-wrapper ">
           <div class="albums__item album-item">
            <h3 class="album-item__title">${t}</h3>
            <table class="album-item__tracklist-table tracklist">
              <thead class="tracklist__header">
              <tr>
                <th class="head-name-track">Track</th>
                <th class="head-name-time">Time</th>
                <th class="head-name-link">Link</th>
              </tr>
              </thead>
              <tbody>
                ${ie(e)}
              </tbody>
            </table>
</div>
          </li>
`}function ee({intDuration:t,movie:e,strTrack:s}){return`
  <tr class="track">
                <td class="name-track">${Z(s,20)}</td>
                <td class="time">${J(t)}</td>
                <td class="img-icon">
                    ${oe(e)}
                </td>
              </tr>
  `}function te(t){c.genres.innerHTML=t.map(e=>Q(e)).join("")}function se({strArtist:t,intDiedYear:e,intFormedYear:s,intMembers:r,strArtistThumb:i,strBiographyEN:n,strGender:o,strCountry:l}){c.sex.innerHTML=o,c.members.innerHTML=r,c.biography.innerHTML=n,c.years.innerHTML=ne(s,e),c.country.innerHTML=l,c.autorTitle.innerHTML=t,c.avatar.innerHTML=`<img src="${i}" alt="${i}" loading="lazy"/>`}function re(t){c.albums.innerHTML=t.map(e=>X(e)).join("")}function ie(t){return t.map(e=>ee(e)).join("")}function ne(t,e){return`${t}–${e??"present"}`}function oe(t){return t?`<a href="${t}" target="_blank" rel="noopener noreferrer" aria-label="watch-video"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21.5933 7.20301C21.4794 6.78041 21.2568 6.39501 20.9477 6.08518C20.6386 5.77534 20.2537 5.55187 19.8313 5.43701C18.2653 5.00701 12.0003 5.00001 12.0003 5.00001C12.0003 5.00001 5.73633 4.99301 4.16933 5.40401C3.74725 5.52415 3.36315 5.75078 3.0539 6.06214C2.74464 6.3735 2.52062 6.75913 2.40333 7.18201C1.99033 8.74801 1.98633 11.996 1.98633 11.996C1.98633 11.996 1.98233 15.26 2.39233 16.81C2.62233 17.667 3.29733 18.344 4.15533 18.575C5.73733 19.005 11.9853 19.012 11.9853 19.012C11.9853 19.012 18.2503 19.019 19.8163 18.609C20.2388 18.4943 20.6241 18.2714 20.934 17.9622C21.2439 17.653 21.4677 17.2682 21.5833 16.846C21.9973 15.281 22.0003 12.034 22.0003 12.034C22.0003 12.034 22.0203 8.76901 21.5933 7.20301ZM9.99633 15.005L10.0013 9.00501L15.2083 12.01L9.99633 15.005Z" fill="white"/></svg></a>`:""}function ae(t){!t.currentTarget!==t.target&&T()}function N(t){t.key==="Escape"&&(T(),document.removeEventListener("keydown",N))}const a={artistsList:document.querySelector(".artists-cards-list"),loadMoreBtn:document.querySelector(".load-more"),form:document.querySelector(".artist-form"),input:document.querySelector(".form-input-filters"),resetBtn:document.querySelector("#resetButton"),resetBtnSearch:document.querySelector("#resetButtonSearch"),sorting:document.querySelector("#sorting"),genre:document.querySelector("#genre"),ul:document.querySelector("#artistsList"),toggleButton:document.querySelector(".search-and-filters"),artistForm:document.querySelector(".artist-form"),empty:document.querySelector(".empty-state"),loader:document.querySelector(".loader")};let u=1,M=0,h="",m="",f="",$;me();p(f,h,m,u);a.loadMoreBtn.addEventListener("click",ye);a.artistsList.addEventListener("click",fe);a.sorting.addEventListener("change",ce);a.genre.addEventListener("change",de);a.form.addEventListener("submit",le);a.resetBtn.addEventListener("click",()=>{P.setChoiceByValue(""),$.setChoiceByValue(""),a.input.value="",h="",m="",f="",u=1,a.artistsList.innerHTML="",p(f,h,m,u)});a.resetBtnSearch.addEventListener("click",()=>{P.setChoiceByValue(""),$.setChoiceByValue(""),a.input.value="",h="",m="",f="",u=1,a.artistsList.innerHTML="",p(f,h,m,u)});const P=new R(a.sorting,{searchEnabled:!1,shouldSort:!1,classNames:{itemSelectable:["select"],placeholder:"sort_placeholder"}});async function le(t){t.preventDefault(),f=a.input.value.trim(),u=1,a.artistsList.innerHTML="",p(f,h,m,u),a.input.value="",a.genre.value="",a.sorting.value=""}async function ce(t){h=t.target.value.trim(),u=1,a.artistsList.innerHTML="",p(f,h,m,u)}async function de(t){m=t.target.value.trim(),u=1,a.artistsList.innerHTML="",p(f,h,m,u)}function ue({genre:t}){return`<option value="${t}">${t}</option>`}function he(t){const e=t.map(ue).join("");a.genre.innerHTML=a.genre.innerHTML+e}async function me(){try{const e=await(await fetch("https://sound-wave.b.goit.study/api/genres")).json();he(e),$=new R(a.genre,{searchEnabled:!1,shouldSort:!1,classNames:{itemSelectable:["select"],placeholder:"sort_placeholder"}})}catch(t){console.error("Помилка запиту жанрів:",t.message)}}async function fe(t){if(t.target.classList.contains("artist-learn-more-btn")){const s=t.target.closest(".artist-card").dataset.id;Y(s)}}async function O(t){const e=t.map(({genres:s,strArtist:r,strBiographyEN:i,strArtistThumb:n,_id:o})=>{const l=Array.isArray(s)?s.map(L=>`<li class="artist-genre-item">${L}</li>`).join(""):"",d=pe(i);return`
        <li class="artist-card"  data-id="${o}">
          <div class="artist-thumb">
      <img src="${n}" alt="${r}" class="artist-img" loading="lazy">
          </div>
          <ul class="aritist-genre-list">${l}</ul>
              <h3 class="artist-name">${r}</h3>
              <p class="artist-bio">${d}</p>
            <button type="button" class="artist-learn-more-btn">Learn More
              <svg class="artist-btn-icon" width="24" height="24" fill="#fff">
                  <use href="${v}#icon-learn-more"></use>
              </svg>
          </button>
         </li>     `}).join("");a.artistsList.insertAdjacentHTML("beforeend",e)}async function p(t,e,s,r){try{D();const i=await j(t,e,s,r);if(a.empty.classList.add("is-hidden"),i.artists.length===0){g(),b(),a.empty.classList.remove("is-hidden"),console.log("Порожній список!");return}if(O(i.artists),b(),M=Math.ceil(i.totalArtists/8),r>=M){g(),b();return}}catch(i){console.log("Помилка:",i.message),g(),b();return}}async function ye(){u+=1,D();try{const t=await j(f,h,m,u);if(t.artists.length===0){g(),console.log("Список артистів порожній!");return}if(O(t.artists),b(),u>=M){g(),console.log("Сторінок більше, ніж контенту!");return}ge()}catch(t){console.log("Помилка:",t.message);return}}function ge(){if(!a.artistsList.firstElementChild)return;const{height:t}=a.artistsList.firstElementChild.getBoundingClientRect();window.scrollBy({top:t*2,behavior:"smooth"})}function pe(t){return t.length<=140?t:t.slice(0,140)+"..."}function be(){a.loadMoreBtn.classList.remove("is-hidden")}function g(){a.loadMoreBtn.classList.add("is-hidden")}function ve(){window.innerWidth<=1439&&a.artistForm.classList.toggle("is-hidden")}a.toggleButton.addEventListener("click",ve);function V(){a.artistForm.classList.toggle("is-hidden",window.innerWidth<=1439)}V();window.addEventListener("resize",V);function D(){document.querySelector(".loader").classList.remove("hide-loader"),g()}function b(){document.querySelector(".loader").classList.add("hide-loader"),be()}const Le=document.querySelector(".swiper-wrapper");let w=1;const k=5;let B=0,_=!1,C;async function Se(){try{const e=await(await fetch(`https://sound-wave.b.goit.study/api/feedbacks?limit=${k}&page=${w}`)).json();B=parseInt(e.total,10);const s=H(e.data);Le.innerHTML=s,C=new G(".swiper",{loop:!1,centeredSlides:!1,spaceBetween:0,slidesPerView:1,pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},navigation:{nextEl:".right_btn",prevEl:".left_btn"},scrollbar:{el:".swiper-scrollbar"},on:{reachEnd:async()=>{if(!_&&!(w*k>=B)){_=!0,w++;try{const i=await(await fetch(`https://sound-wave.b.goit.study/api/feedbacks?limit=${k}&page=${w}`)).json(),n=H(i.data),o=document.createElement("div");o.innerHTML=n;const l=Array.from(o.children);C.appendSlide(l)}catch(r){console.error("Error fetching more feedbacks:",r)}_=!1}}}})}catch(t){console.error("Fetch error:",t)}}function we(t){return`
    <div class="fb_item swiper-slide">
      <div class="stars">${Ee(t.rating)}</div>
      <p class="fb_user_text">"${t.descr}"</p>
      <p class="fb_user_name">${t.name}</p>
    </div>
  `}function H(t){return t.map(e=>we(e)).join("")}function Ee(t){let e="";for(let r=1;r<=5;r++){const i=r<=t?"icon-purple-star":"icon-white-star";e+=`
      <svg width="20" height="20">
        <use href="${v}#${i}"></use>
      </svg>
    `}return e}document.addEventListener("DOMContentLoaded",()=>{Se()});const A=document.querySelector(".left_btn"),x=document.querySelector(".right_btn");function U(){window.innerWidth>=768?(A.style.display="flex",x.style.display="flex"):(A.style.display="none",x.style.display="none")}U();window.addEventListener("resize",U);class ke{constructor(){var e,s,r,i,n;this.modal=document.getElementById("feedbackModal"),this.form=document.getElementById("feedbackForm"),this.overlay=(e=this.modal)==null?void 0:e.querySelector(".feedback-modal__overlay"),this.closeBtn=(s=this.modal)==null?void 0:s.querySelector(".feedback-modal__close"),this.submitBtn=(r=this.modal)==null?void 0:r.querySelector(".feedback-modal__submit"),this.loader=(i=this.modal)==null?void 0:i.querySelector(".feedback-modal__loader"),this.submitText=(n=this.modal)==null?void 0:n.querySelector(".feedback-modal__submit-text"),this.notification=null,this.currentRating=0,this.isSubmitting=!1,this.eventListeners=new Map,this.init()}init(){this.modal&&(this.updateIconUrls(),this.bindEvents())}updateIconUrls(){this.modal.querySelectorAll("svg use").forEach(s=>{const r=s.getAttribute("href");r&&r.startsWith("#")&&s.setAttribute("href",`${v}${r}`)})}bindEvents(){var n,o,l;const e=()=>this.close(),s=()=>this.close(),r=d=>{d.key==="Escape"&&this.isOpen()&&this.close()},i=d=>this.handleSubmit(d);this.eventListeners.set(this.closeBtn,{type:"click",handler:e}),this.eventListeners.set(this.overlay,{type:"click",handler:s}),this.eventListeners.set(document,{type:"keydown",handler:r}),this.eventListeners.set(this.form,{type:"submit",handler:i}),(n=this.closeBtn)==null||n.addEventListener("click",e),(o=this.overlay)==null||o.addEventListener("click",s),document.addEventListener("keydown",r),(l=this.form)==null||l.addEventListener("submit",i),this.bindRatingEvents(),this.bindValidationEvents(),this.bindOpenButtons()}bindOpenButtons(){const e=document.querySelectorAll("[data-feedback-modal]"),s=document.querySelectorAll(".feedback-modal-trigger"),r=()=>this.open();e.forEach(i=>{i.addEventListener("click",r),this.eventListeners.set(i,{type:"click",handler:r})}),s.forEach(i=>{i.addEventListener("click",r),this.eventListeners.set(i,{type:"click",handler:r})})}bindRatingEvents(){var i,n;const e=(i=this.modal)==null?void 0:i.querySelectorAll(".feedback-modal__star");if(!e)return;e.forEach((o,l)=>{const d=()=>this.highlightStars(l+1),L=()=>this.setRating(l+1);o.addEventListener("mouseenter",d),o.addEventListener("click",L),this.eventListeners.set(o,[{type:"mouseenter",handler:d},{type:"click",handler:L}])});const s=(n=this.modal)==null?void 0:n.querySelector(".feedback-modal__rating"),r=()=>this.highlightStars(this.currentRating);s==null||s.addEventListener("mouseleave",r),this.eventListeners.set(s,{type:"mouseleave",handler:r})}bindValidationEvents(){var n,o;const e=(n=this.modal)==null?void 0:n.querySelector("#feedbackName"),s=(o=this.modal)==null?void 0:o.querySelector("#feedbackMessage"),r=()=>this.validateName(),i=()=>this.validateMessage();e==null||e.addEventListener("input",r),e==null||e.addEventListener("blur",r),s==null||s.addEventListener("input",i),s==null||s.addEventListener("blur",i),this.eventListeners.set(e,[{type:"input",handler:r},{type:"blur",handler:r}]),this.eventListeners.set(s,[{type:"input",handler:i},{type:"blur",handler:i}])}highlightStars(e){var r;const s=(r=this.modal)==null?void 0:r.querySelectorAll(".feedback-modal__star");s&&s.forEach((i,n)=>{const o=i.querySelector("use");n<e?(o==null||o.setAttribute("href",`${v}#icon-purple-star`),i.classList.add("active")):(o==null||o.setAttribute("href",`${v}#icon-white-star`),i.classList.remove("active"))})}setRating(e){this.currentRating=e,this.highlightStars(e),this.clearError("ratingError")}validateName(){var r;const e=(r=this.modal)==null?void 0:r.querySelector("#feedbackName"),s=(e==null?void 0:e.value.trim())||"";return s.length===0?(this.showError("nameError","Поле імені не може бути порожнім"),!1):s.length<2?(this.showError("nameError","Ім'я повинно містити щонайменше 2 символи"),!1):s.length>16?(this.showError("nameError","Ім'я не повинно перевищувати 16 символів"),!1):(this.clearError("nameError"),!0)}validateMessage(){var r;const e=(r=this.modal)==null?void 0:r.querySelector("#feedbackMessage"),s=(e==null?void 0:e.value.trim())||"";return s.length===0?(this.showError("messageError","Поле повідомлення не може бути порожнім"),!1):s.length<10?(this.showError("messageError","Повідомлення повинно містити щонайменше 10 символів"),!1):s.length>512?(this.showError("messageError","Повідомлення не повинно перевищувати 512 символів"),!1):(this.clearError("messageError"),!0)}validateRating(){return this.currentRating===0?(this.showError("ratingError","Будь ласка, виберіть рейтинг"),!1):(this.clearError("ratingError"),!0)}showError(e,s){var i;const r=(i=this.modal)==null?void 0:i.querySelector(`#${e}`);r&&(r.textContent=s,r.style.display="block")}clearError(e){var r;const s=(r=this.modal)==null?void 0:r.querySelector(`#${e}`);s&&(s.textContent="",s.style.display="none")}clearAllErrors(){var s;const e=(s=this.modal)==null?void 0:s.querySelectorAll(".feedback-modal__error");e==null||e.forEach(r=>{r.textContent="",r.style.display="none"})}async handleSubmit(e){if(e.preventDefault(),this.isSubmitting)return;const s=this.validateName(),r=this.validateMessage(),i=this.validateRating();if(!s||!r||!i)return;const n=this.getFormData();await this.submitFeedback(n)}getFormData(){var r,i;const e=(r=this.modal)==null?void 0:r.querySelector("#feedbackName"),s=(i=this.modal)==null?void 0:i.querySelector("#feedbackMessage");return{name:(e==null?void 0:e.value.trim())||"",descr:(s==null?void 0:s.value.trim())||"",rating:this.currentRating}}async submitFeedback(e){try{this.setSubmittingState(!0);const s=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const r=await s.json();console.log("Feedback submitted successfully:",r),this.showSuccessMessage(),setTimeout(()=>this.close(),1e3),this.showNotification(),this.resetForm()}catch(s){console.error("Submit error:",s),this.showErrorMessage("Помилка при відправці. Спробуйте ще раз.")}finally{this.setSubmittingState(!1)}}setSubmittingState(e){this.isSubmitting=e,this.submitBtn&&(this.submitBtn.disabled=e),this.loader&&this.submitText&&(e?(this.loader.style.display="block",this.submitText.style.display="none"):(this.loader.style.display="none",this.submitText.style.display="block"))}showSuccessMessage(){this.submitText&&(this.submitText.textContent="Submitted!")}showErrorMessage(e){this.showError("ratingError",e)}showNotification(){this.notification&&this.notification.remove(),this.notification=document.createElement("div"),this.notification.className="feedback-modal__notification",this.notification.textContent="Feedback submitted successfully!",this.modal.appendChild(this.notification),setTimeout(()=>{var e;(e=this.notification)==null||e.remove(),this.notification=null},2e3)}open(){if(!this.modal)return;this.modal.classList.add("is-open"),document.body.style.overflow="hidden";const e=this.modal.querySelector("#feedbackName");setTimeout(()=>e==null?void 0:e.focus(),100)}close(){this.modal&&(this.modal.classList.remove("is-open"),document.body.style.overflow="",this.removeEventListeners(),this.resetForm())}resetForm(){var e;(e=this.form)==null||e.reset(),this.currentRating=0,this.highlightStars(0),this.clearAllErrors(),this.setSubmittingState(!1),this.submitText&&(this.submitText.textContent="Submit")}removeEventListeners(){this.eventListeners.forEach((e,s)=>{Array.isArray(e)?e.forEach(({type:r})=>{s.removeEventListener(r)}):s.removeEventListener(e.type)}),this.eventListeners.clear()}isOpen(){var e;return((e=this.modal)==null?void 0:e.classList.contains("is-open"))||!1}}let y=null;document.addEventListener("DOMContentLoaded",()=>{y=new ke});window.openFeedbackModal=()=>{y==null||y.open()};window.closeFeedbackModal=()=>{y==null||y.close()};async function _e(){const t=document.querySelector(".images-1"),e=document.querySelector(".images-2");try{const r=await(await fetch("https://sound-wave.b.goit.study/api/artists?limit=4&page=1")).json(),n=await(await fetch("https://sound-wave.b.goit.study/api/artists?limit=4&page=3")).json(),o=r.artists.map(d=>d.strArtistThumb),l=n.artists.map(d=>d.strArtistThumb);t.innerHTML=F(o),e.innerHTML=F(l)}catch(s){console.error(s.message)}}function F(t){return t.map(e=>`<img src="${e}" alt="artist"/>`).join("")}_e();
//# sourceMappingURL=index.js.map
